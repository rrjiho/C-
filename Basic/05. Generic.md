## Generic

#### 클래스 정의 시 여러가지 자료형에 대해 일반화
#### 코드의 재사용성을 높이고 타입 안정성을 제공하는 강력한 기능

```cs
class MyList
{
    int [] arr = new int[10];

    public int GetItem(int i)
    {
        return arr[i];
    }
}

class MyfloatList
{
    float [] arr = new float[10];

    public float GetItem(int i)
    {
        return arr[i];
    }
}

class MyMonsterList
{
    Monster [] arr = new Monster[10];

    public Monster GetItem(int i)
    {
        return arr[i];
    }
}
```
- 같은 기능을 사용하는 클래스라도 자료형에 따라 만들어야 하기에 비효율적이다.
- 이에 따라 제네릭 기능이 도입된 것이다.

### 주요 장점
- 타입 안전성: 제네릭을 사용하면 코드에서 타입 관련 오류를 컴파일 타임에 확인할 수 있다.
- 코드 재사용성: 제네릭을 사용하면 동일한 코드로 다양한 타입을 처리할 수 있다.
- 성능 향상: 제네릭을 사용하면 박싱(boxing)과 언박싱(unboxing)을 피할 수 있다. 특히 값 타입을 다룰 때 성능상 유리하다.

```cs
// 기본 문법
public class Box<T>
{
    private T item;

    public void SetItem(T value)
    {
        item = value;
    }

    public T GetItem()
    {
        return item;
    }
}
```
- 일반화하여 T 자리에 다양한 자료형이 올 수 있다.

### boxing, unboxing
- 값 타입과 참조 타입간의 변환 과정이다.
- 모든 자료형 및 클래스의 공통 부모는 Object.

#### boxing
- 박싱은 값 타입(예: int, struct, double)을 참조 타입(예: object)으로 변환하는 과정이다.
- 값 타입은 스택(stack) 메모리에 저장되지만, 참조 타입은 힙(heap) 메모리에 저장된다.
- 박싱이 발생하면 값 타입은 힙에 객체로 저장되며 객체의 참조(주소)가 스택에 저장됩니다.

```cs
int num = 10;          // 값 타입 (스택에 저장)
object obj = num;      // 박싱: 값 타입을 참조 타입으로 변환 (힙에 객체로 저장)
```

#### unboxing
- 언박싱은 참조 타입을 값 타입으로 다시 변환하는 과정이다.
- 이때 변환하려는 값의 타입을 명시적으로 지정해야 하며, 타입이 일치하지 않으면 예외가 발생한다.
- 언박싱은 박싱을 통해 힙에 저장된 값을 다시 스택에 복사하는 과정이므로 추가적인 비용이 발생한다.

```cs
object obj = 10;       // 박싱: 값 타입을 참조 타입으로 변환
int num = (int)obj;     // 언박싱: 참조 타입을 다시 값 타입으로 변환
```

### 성능에 미치는 영향
- 메모리 할당
  - 박싱을 하면 값 타입이 힙에 할당된다. 이 과정에서 힙에 객체를 생성해야 하므로 메모리 할당과 해제가 발생한다. 이로 인해 **가비지 컬렉션(GC)**의 부하가 발생할 수 있다.
  - 값 타입이 직접 스택에 저장되면 메모리 할당과 해제가 매우 빠르지만 박싱은 추가적인 메모리 할당이 필요하고 그 후에는 힙에서 가비지 컬렉터가 해당 메모리를 추적하고 정리해야 한다.
- 성능 저하
  - 박싱과 언박싱은 CPU의 작업을 추가로 요구한다. 값을 스택에서 힙으로 복사하거나 힙에서 값을 스택으로 복사하는 데 시간이 소요되기 때문에 성능에 영향을 미친다.
  - 언박싱을 잘못하면 `InvalidCastException`과 같은 예외가 발생할 수 있어 추가적인 오류 처리 비용도 발생할 수 있다.
#### 이에 반에 제네릭은 타입이 명확하게 지정된 코드로 컴파일 타임에 타입이 결정되므로 런타임에 박싱이 필요하지 않다.
#### 따라서 성능상 이점이 발생한다.
